<!DOCTYPE html>
<html>
    <head>
        <title> Login </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <style>
       .topnav {
            background-color: #333;
            overflow: hidden;}
        .topnav a{
            float: left;
            color: #f2f2f2;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 17px;}
        .topnav a:hover{
            background-color: #ddd;
            color: black;}
        .topnav a.active {
            background-color: #4CAF50;
            color: white;}
        </style>
        <script>
        
        $(document).ready(function() {
            
            $("#new").on("click",function() {
                $.ajax({
                    method: "post",
                    url: "/loginProcess",
                    dataType: "json",
                    data: { "username" : $("#username").val(),
                            "password" : $("#password").val(),
                            "action" : "new"},
                    success: function(result,status) {
                        if(!result) {
                            alert("Account was not made");
                        }
                        else {
                            alert("Account made, Press login to proceed")
                        }
                    }
                });
            });
            
            $("#admin").on("click",function(){
                $.ajax({
                    method: "post",
                    url: "/loginProcess",
                    dataType: "json",
                    data: { "username" : $("#username").val(),
                            "password" : $("#password").val(),
                            "action" : "admin"},
                    success: function(result,status) {
                        if(!result) {
                            alert("Wrong Credentials for Admin");
                        }
                        else {
                            location.href = "/admin";
                        }
                    }
                });
            });
            
            
            $("#loginBtn").on("click",function(){
                $.ajax({
                    method: "post",
                    url: "/loginProcess",
                    dataType: "json",
                    data: { "username" : $("#username").val(),
                            "password" : $("#password").val(),
                             "action"  : "login"},
                    success: function(result,status) {
                //alert(result);
                        if(!result){
                        alert("Wrong credentials!")
                        }  else{
                            location.href = "/search";
                        }
                    }   
                });//ajax
        });//click
    }); //document.ready
</script>
    <center> 
        <div class="topnav">
        <a class = "active" href="/">Login</a>
        <a href="/search">Search Games</a>
        <a href="/checkout">Checkout</a>
        </div>
    </center>
    </head>
    <body>
        <h1> Sign-in </h1>
        Username: <input type="text" name="username" id="username"/><br>
        Password: <input type="password" id="password"> <br>
        <button id="loginBtn">Login!</button>
        <button id="new">Create</button>
        <button id="admin">Admin Login</button>
    </body>
</html>
